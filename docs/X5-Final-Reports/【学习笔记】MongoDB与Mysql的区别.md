# 【学习笔记】MongoDB与Mysql的区别

MySQL与MongoDB都是开源的常用数据库，但是MySQL是传统的关系型数据库，MongoDB则是非关系型数据库，也叫文档型数据库，是一种NoSQL的数据库。

#### 一、关系型数据库—MySQL

1、在不同的引擎上有不同的存储方式。
 2、查询语句是使用传统的sql语句，拥有较为成熟的体系，成熟度很高。
 3、开源数据库的份额在不断增加，mysql的份额页在持续增长。
 4、缺点就是在海量数据处理的时候效率会显著变慢。

#### 二、非关系型数据库—MongoDB

非关系型数据库(nosql ),属于文档型数据库。先解释一下文档的数据库，即可以存放xml、json、bson类型系那个的数据。这些数据具备自述性，呈现分层的树状数据结构。数据结构由键值(key=>value)对组成。

1、存储方式：虚拟内存+持久化。
 2、查询语句：是独特的MongoDB的查询方式。
 3、适合场景：事件的记录，内容管理或者博客平台等等。
 4、架构特点：可以通过副本集，以及分片来实现高可用。
 5、数据处理：数据是存储在硬盘上的，只不过需要经常读取的数据会被加载到内存中，将数据存储在物理内存中，从而达到高速读写。
 6、成熟度与广泛度：新兴数据库，成熟度较低，Nosql数据库中最为接近关系型数据库，比较完善的DB之一，适用人群不断在增长。

### 三、MongoDB优势与劣势

**优势：**
 1、在适量级的内存的MongoDB的性能是非常迅速的，它将热数据存储在物理内存中，使得热数据的读写变得十分快。
 2、MongoDB的高可用和集群架构拥有十分高的扩展性。
 3、在副本集中，当主库遇到问题，无法继续提供服务的时候，副本集将选举一个新的主库继续提供服务。
 4、MongoDB的Bson和JSon格式的数据十分适合文档格式的存储与查询。

**劣势：**
 1、 不支持事务操作。MongoDB本身没有自带事务机制，若需要在MongoDB中实现事务机制，需通过一个额外的表，从逻辑上自行实现事务。
 2、 应用经验少，由于NoSQL兴起时间短，应用经验相比关系型数据库较少。
 3、MongoDB占用空间过大。

### 四、特色对比

像MySQL一样，MongoDB提供了丰富的远远超出了简单的键值存储中提供的功能和功能。 MongoDB具有查询语言，功能强大的辅助索引（包括文本搜索和地理空间），数据分析功能强大的聚合框架等。相比使用关系数据库使用MongoDB，您还可以使用这些功能，跨越更多样化的数据类型和数据规模。

|                | MySQL | MongoDB |
| -------------- | ----- | ------- |
| 丰富的数据模型 | 否    | 是      |
| 动态Schema     | 否    | 是      |
| 数据类型       | 是    | 是      |
| 数据本地化     | 否    | 是      |
| 字段更新       | 是    | 是      |
| 易于编程       | 否    | 是      |
| 复杂事务       | 是    | 否      |
| 审计           | 是    | 是      |
| 自动分片       | 否    | 是      |

### 五、查询语言

![image-20190630222147261](../../images/h1.png)

### 六、Mysql和Mongodb主要应用场景

1. 如果需要将mongodb作为后端db来代替mysql使用，即这里mysql与mongodb 属于平行级别，那么，这样的使用可能有以下几种情况的考量：

    (1) mongodb所负责部分以文档形式存储，能够有较好的代码亲和性，json格式的直接写入方便。(如日志之类) 

   (2) 从datamodels设计阶段就将原子性考虑于其中，无需事务之类的辅助。开发用如nodejs之类的语言来进行开发，对开发比较方便。

   (3) mongodb本身的failover机制，无需使用如MHA之类的方式实现。

2. 将mongodb作为类似redis ，memcache来做缓存db，为mysql提供服务，或是后端日志收集分析。 考虑到mongodb属于nosql型数据库，sql语句与数据结构不如mysql那么亲和 ，也会有很多时候将mongodb做为辅助mysql而使用的类redis memcache 之类的缓存db来使用。 亦或是仅作日志收集分析。

